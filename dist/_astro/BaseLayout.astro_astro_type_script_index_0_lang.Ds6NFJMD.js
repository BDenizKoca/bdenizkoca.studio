const $=document.querySelector('[data-component="sticky-header"]'),it=document.body,G=it.classList.contains("page-home");if($&&G){const n=()=>{window.scrollY>120?$.classList.add("is-visible"):$.classList.remove("is-visible")};window.addEventListener("scroll",n,{passive:!0}),n()}const P="preferredLanguage";try{const t=document.documentElement.lang||"en",n=window.localStorage.getItem(P),e=window.location.pathname;!n&&(e==="/"||e==="/index.html")&&((navigator.languages&&navigator.languages.length?navigator.languages:[navigator.language]).some(o=>o&&o.toLowerCase().startsWith("tr"))&&t!=="tr"?(window.localStorage.setItem(P,"tr"),window.location.replace("/tr/")):window.localStorage.setItem(P,t)),document.querySelectorAll(".language-toggle a").forEach(a=>{a.addEventListener("click",()=>{const d=a.getAttribute("href")||"",o=d.startsWith("/tr/")||d.startsWith("/tr")?"tr":"en";window.localStorage.setItem(P,o)})})}catch{}const j=document.querySelector(".site-header"),ct=document.scrollingElement||document.documentElement;let T=null,W=!1;const lt=()=>{if(window.__forceSmoothScroll===!0||typeof window.matchMedia!="function")return!1;try{return window.matchMedia("(prefers-reduced-motion: reduce)").matches}catch{return!1}},U=t=>t.replace(/\/index\.html$/,"/"),Z=t=>{if(!t||t==="#")return null;const n=decodeURIComponent(t.slice(1));return document.getElementById(n)},dt=t=>{if(lt()){window.scrollTo(0,t);return}if("scrollBehavior"in document.documentElement.style){window.scrollTo({top:t,behavior:"smooth"});return}T&&(cancelAnimationFrame(T),T=null);const n=ct.scrollTop,e=t-n;if(Math.abs(e)<1){window.scrollTo(0,t);return}const u=Math.min(700,Math.max(200,Math.abs(e)*.5)),r=o=>1-Math.pow(1-o,3),a=performance.now(),d=o=>{const f=o-a,w=Math.min(1,f/u),m=r(w),h=n+e*m;window.scrollTo(0,h),w<1?T=requestAnimationFrame(d):(T=null,window.scrollTo(0,t))};T=requestAnimationFrame(d)},tt=t=>{if(!t)return;const e=(j?j.offsetHeight:0)+16,u=t.getBoundingClientRect(),r=Math.max(0,u.top+window.pageYOffset-e);dt(r)},z=t=>{const n=t.getAttribute("href");if(!n||n.startsWith("mailto:")||n.startsWith("tel:"))return null;let e;try{e=new URL(n,window.location.href)}catch{return null}if(!e.hash||e.origin!==window.location.origin)return null;const u=U(e.pathname),r=U(window.location.pathname);if(u!==r)return null;const a=Z(e.hash);return a?{url:e,target:a}:null},et=t=>{tt(t.target),t.url.hash!==window.location.hash&&(history.replaceState?history.replaceState(null,"",t.url.hash):(W=!0,window.location.hash=t.url.hash))},ut=t=>{const n=z(t.currentTarget);n&&(t.preventDefault(),et(n))},ht=t=>{if(t.defaultPrevented||t.metaKey||t.ctrlKey||t.altKey||!(t.key==="Enter"||t.key===" "))return;const e=z(t.currentTarget);e&&(t.preventDefault(),et(e))},nt=()=>{if(W){W=!1;return}const t=Z(window.location.hash);t&&tt(t)},S=t=>{if(!t||t.dataset.magneticProcessed==="true")return;t.dataset.magneticProcessed="true",(r=>{if(r.querySelector(".intro-lede__char"))return;const a=document.createTreeWalker(r,NodeFilter.SHOW_TEXT,{acceptNode(o){return o.textContent.trim().length?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),d=[];for(;a.nextNode();)d.push(a.currentNode);d.forEach(o=>{const f=document.createDocumentFragment();o.textContent.split(/(\s+)/).forEach(m=>{if(/^\s+$/.test(m))f.appendChild(document.createTextNode(m));else{const h=document.createElement("span");h.style.display="inline-block",h.style.whiteSpace="nowrap";for(const g of m){const p=document.createElement("span");p.className="intro-lede__magnetic intro-lede__char",p.textContent=g,h.appendChild(p)}f.appendChild(h)}}),o.parentNode.replaceChild(f,o)})})(t);const e=Array.from(t.querySelectorAll(".intro-lede__magnetic"));if(!e.length)return;if("ontouchstart"in window||navigator.maxTouchPoints>0)t.classList.add("mobile-interactive-hint"),t.addEventListener("click",r=>{const a=r.clientX,d=r.clientY;e.forEach(o=>{const f=o.getBoundingClientRect(),w=f.left+f.width/2,m=f.top+f.height/2,h=w-a,g=m-d,p=Math.hypot(h,g),v=120;if(p<v){const M=(v-p)/v,E=Math.atan2(g,h),_=M*25,k=Math.cos(E)*_,O=Math.sin(E)*_,B=1+M*.4,i=(Math.random()-.5)*40*M,c=window.getComputedStyle(o).animationName!=="none";c&&(o.style.animation="none"),o.style.transition="none",o.style.transform=`translate(${k}px, ${O}px) scale(${B}) rotate(${i}deg)`,setTimeout(()=>{o.style.transition="transform 2000ms cubic-bezier(0.23, 1, 0.32, 1)",o.style.transform="translate(0, 0) scale(1) rotate(0)",o.addEventListener("transitionend",()=>{o.style.transition="",o.style.transform="",c&&(o.style.animation="")},{once:!0})},0)}})});else{let m=0,h=0,g=null;const p=()=>{e.forEach(i=>{const c=i.getBoundingClientRect();i.__magnetic={x:c.left+c.width/2,y:c.top+c.height/2}})};e.forEach(i=>{i.__float={amplitude:3+Math.random()*3.5,frequency:4e-4+Math.random()*2e-4,rotateAmplitude:2.5+Math.random()*3,rotateFrequency:3e-4+Math.random()*15e-5,phaseOffset:Math.random()*Math.PI*2,horizontalDrift:(Math.random()-.5)*2},i.__current={x:0,y:0,scale:1,rotate:0}});const v=(i,c,C)=>i+(c-i)*C;let M=!1;const E=i=>{const c=i;let C=!1;e.forEach(F=>{const Y=F.__magnetic,s=F.__float,l=F.__current;if(!Y||!s||!l)return;const N=m-Y.x,K=h-Y.y,H=Math.hypot(N,K);let q=0,A=0,R=1,x=0;if(H<90){const y=(90-H)/90,b=-N*.6*y,I=-K*.6*y,X=1+.35*y,D=24*y*Math.max(-1,Math.min(1,N/90)),L=y*.4,rt=Math.sin(c*s.frequency+s.phaseOffset*1e3)*s.amplitude*L,at=Math.sin(c*s.frequency*.7+s.phaseOffset*1e3)*s.horizontalDrift*L,st=Math.sin(c*s.rotateFrequency+s.phaseOffset*1e3)*s.rotateAmplitude*L;q=b+at,A=I+rt,R=X,x=D+st}else if(H<250){const y=1-(H-90)/160,b=y*y*(3-2*y),I=Math.sin(c*s.frequency+s.phaseOffset*1e3)*s.amplitude*b,X=Math.sin(c*s.frequency*.7+s.phaseOffset*1e3)*s.horizontalDrift*b,D=Math.sin(c*s.rotateFrequency+s.phaseOffset*1e3)*s.rotateAmplitude*b,L=1+Math.sin(c*s.frequency*.5+s.phaseOffset*1e3)*.02*b;q=X,A=I,R=L,x=D}else q=0,A=0,R=1,x=0;l.x=v(l.x,q,.12),l.y=v(l.y,A,.12),l.scale=v(l.scale,R,.12),l.rotate=v(l.rotate,x,.12),(Math.abs(l.x-q)>.1||Math.abs(l.y-A)>.1||Math.abs(l.scale-R)>.001||Math.abs(l.rotate-x)>.1)&&(C=!0),F.style.transform=`translate3d(${l.x}px, ${l.y}px, 0) scale(${l.scale}) rotate(${l.rotate}deg)`}),M||C?g=requestAnimationFrame(E):g=null},_=i=>{m=i.clientX,h=i.clientY},k=i=>{M=!0,m=i.clientX,h=i.clientY,p(),g||(g=requestAnimationFrame(E))},O=()=>{M=!1,m=-9999,h=-9999,g||(g=requestAnimationFrame(E))};p(),new ResizeObserver(p).observe(t),t.addEventListener("pointerenter",k),t.addEventListener("pointermove",_),t.addEventListener("pointerleave",O)}},ft=()=>{if(G){const a=document.querySelector(".intro-lede--headline");a&&S(a)}const t=document.querySelector(".page-hero__title");t&&S(t);const n=document.querySelector(".article-hero h1");n&&S(n);const e=document.querySelector(".page-heading--standalone h1");e&&S(e);const u=document.querySelector(".longform-article h1");u&&S(u);const r=document.querySelector(".not-found-quote-text");r&&S(r)},mt=Array.from(document.querySelectorAll('a[href*="#"]'));mt.forEach(t=>{z(t)&&(t.addEventListener("click",ut,{passive:!1}),t.addEventListener("keydown",ht))});ft();window.addEventListener("hashchange",nt);window.addEventListener("load",nt);const J=document.querySelector(".project-header");J&&setTimeout(()=>{J.classList.add("is-visible")},100);const Q=document.querySelector(".project-header h1");Q&&S(Q);const ot=Array.from(document.querySelectorAll('.site-navigation a[href^="#"]')),V=ot.map(t=>{const n=document.querySelector(t.getAttribute("href"));return n?{link:t,section:n}:null}).filter(t=>t);if(V.length){let t=null;const n=()=>{const e=window.innerHeight;let u=0,r=null;for(const{link:a,section:d}of V){const o=d.getBoundingClientRect(),w=Math.max(0,Math.min(o.bottom,e)-Math.max(o.top,0))/d.offsetHeight;w>u&&(u=w,r=a)}r&&r!==t&&(ot.forEach(a=>a.removeAttribute("aria-current")),r.setAttribute("aria-current","page"),t=r)};window.addEventListener("scroll",n,{passive:!0}),n()}if(window.location.hash){const t=document.querySelector(window.location.hash);t&&setTimeout(()=>{const e=(document.querySelector(".site-header")?.offsetHeight||0)+24,r=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:r,behavior:"auto"})},100)}
